!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(3)},,,function(e,t,n){"use strict";n.r(t);var o=function(){function e(e,t,n){e=e||[0,0],t=t||{},n=n||{},this.address="",this.placemark=new ymaps.Placemark(e,t,n)}return e.prototype={getPlacemark:function(){return this.placemark},setCoordinates:function(e){this.placemark.geometry.setCoordinates(e)},getCoordinates:function(){return this.placemark.geometry.getCoordinates()},setAddress:function(e){ymaps.geocode(e).then((function(e){var t=e.geoObjects.get(0);this.placemark.properties.set({iconCaption:[t.getLocalities().length?t.getLocalities():t.getAdministrativeAreas(),t.getThoroughfare()||t.getPremise()].filter(Boolean).join(", "),balloonContent:t.getAddressLine()}),this.address=t.getAddressLine()}))},getAddress:function(){return this.address}},e}(),r=function(){if(document.querySelector("#map")){var e=document.querySelector('input[name="coords"]'),t=document.querySelector('input[name="center"]'),n=document.querySelector('input[name="zoom"]'),r=[],a=null,i=function(){var t=[];r.forEach((function(e){t.push(e.getCoordinates())})),e.value=JSON.stringify(t)},s=[55.75201801312925,37.621497109128285];try{t&&(s=JSON.parse(t.value))}catch(e){s=[55.75201801312925,37.621497109128285]}var c=new ymaps.Map("map",{center:s,zoom:n?parseInt(n.value):16,controls:["zoomControl","searchControl"]});c.behaviors.disable("scrollZoom"),c.events.add("boundschange",(function(e){var t=e.get("newZoom");n&&(n.value=t)}));var u=new ymaps.control.Button({data:{content:"Убрать метку",title:"Нажмите для удаления метки с карты"},options:{selectOnClick:!1,maxWidth:[30,100,150]}});u.events.add("click",(function(){a?(c.geoObjects.remove(a),r=r.filter((function(e){return e.getPlacemark()!==a})),a=null,f(),i()):alert("Выберите метку для удаления.")})),c.controls.add(u,{float:"right",floatIndex:100});var l=function(e){var t=new o(e,{},{draggable:!0});t.setCoordinates(e),t.setAddress(e),c.geoObjects.add(t.getPlacemark()),r.push(t),i(),t.getPlacemark().events.add("click",(function(){a&&a.options.set("preset","islands#blueIcon"),(a=t.getPlacemark()).options.set("preset","islands#redIcon")})).add("dragend",(function(){t.setAddress(t.getCoordinates()),i()}))};if(c.events.add("click",(function(e){l(e.get("coords"))})),e){var d=[];try{(d=JSON.parse(e.value)).length&&d[0]==parseFloat(d[0])?l(d):d.length&&d.forEach((function(e){l(e)})),setTimeout((function(){return f()}))}catch(e){}}}function f(){if(r.length>0){var e=c.geoObjects.getBounds();c.setBounds(e,{checkZoomRange:!0,duration:500,zoomMargin:100}).then((function(){c.getZoom()>16&&c.setZoom(16),t.value=JSON.stringify(c.getCenter())}))}}};$(document).ready((function(){ymaps.ready(r)})).on("pjax:complete",(function(){r()}))}]);